<!--
  ~ Copyright (c)-- Created By JUNJIE Lin -> On 2019/9/21
  -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Books</title>
    <link rel="stylesheet" th:href="@{/public/css/bootstrap.min.css}">
</head>
<body>
<div class="container text-center">
    <h1 class="h1">Second Hand Book Platform</h1>
    <a href="/books/add" class="hyperlink">Add Book</a>
    <a href="/profile" class="hyperlink">Go to Profile</a>
</div>


<div>
    <div class="container text-center">
        <h2>Search</h2>
        <form th:action="@{/books/search}" method="get" class="form-group w-75">
            <div class="form-group">
                <label for="book_name">Book Name</label>
                <input class="form-control" type="text" name="book_name"
                       id="book_name"
                      >
            </div>
            <div class="form-group">
                <label for="author"> Book Author</label>
                <input type="text" class="form-control" name="author"
                       id="author">
            </div>
            <div class="form-group">
                <label for="year" class="label">Year Needed:</label>
                <select name="year_needed" id="year" th:default="${null}"
                        class="dropdown ">
                    <option selected disabled="disabled">Choose Year</option>
                    <option value="1st Year Semester 1">1st Year Semester 1</option>
                    <option value="1st Year Semester 2">1st Year Semester 2</option>
                    <option value="2nd Year Semester 1">2nd Year Semester 1</option>
                    <option value="2nd Year Semester 2">2nd Year Semester 2</option>
                    <option value="3rd Year Semester 1">3rd Year Semester 1</option>
                    <option value="3rd Year Semester 2">3rd Year Semester 2</option>
                    <option value="4th Year Semester 1">4th Year Semester 1</option>
                    <option value="4th Year Semester 2">4th Year Semester 2</option>
                    <option value="Optional">Optional Course</option>
                </select>
            </div>
            <div class="form-group">
                <label for="type">Book Type:</label>
                <select name="type" id="type" class=" form-control">
                    <option selected></option>
                    <option th:each="bookType : ${T(com.junjie.bookplatform.Model.Type).values()}"
                            th:value="${bookType}"
                            th:text="${bookType.getDisplayValue()}"></option>
                </select>
            </div>
            <input type="number" name="start" id="start" th:value="${start}" hidden>
            <div class="form-group">
                <label for="lim">Results per page:</label>
                <select name="lim" id="lim" th:default="10">
                    <option value="10">10</option>
                    <option value="20">20</option>
                </select>
            </div>
            <div class="form-group">
                <label for="recent">Filter by recently Added</label>
                <input type="checkbox" name="recent" id="recent" value="true" >
            </div>
            <input type="submit" value="Search" class=" mt-1 btn  btn-primary btn-block"/>
        </form>
    </div>

    <div id="resultTbl" class="mt-5 container">
        <table class="table table-bordered ">
            <tr class="bg-light">
                <th class="column-header">Book Name</th>
                <th class="column-header">Book Author</th>
                <th class="column-header">Type</th>
                <th class="column-header">Year Needed</th>
                <th class="column-header">Price</th>
                <th class="column-header">Image</th>
                <th class="column-header">Buy Book</th>
            </tr>
            <tr th:each="book,ittr:${books}">
                <td th:text="${book.getBookName()}"></td>
                <td th:text="${book.getAuthor()}"></td>
                <td th:text="${book.getType().toString()}"></td>
                <td th:text="${book.getYearNeed()}"></td>
                <td th:text="|Â¥${book.getPrice()}|"></td>
                <td class="table-row-cell">
                    <div class="align-content-center">
                        <img th:src="@{'/books/image/'+${book.getId()}}" th:alt="${book.getBookName()}" class="w-50">
                    </div>
                    <!--                    <form action="/books/delete" method="post" content="application/x-www-form-urlencoded" >-->
                    <!--                        <input type="number" name="book_id" id="book_id" th:value="${book.getId()}" hidden>-->
                    <!--                        <input type="submit"value="Remove"/>-->
                    <!--                    </form>-->
                </td>
                <td>
                    <form action="/books/buy/confirm" method="post" content="application/x-www-form-urlencoded">
                        <input type="number" name="book_id" id="buy_book_id" th:value="${book.getId()}" hidden>
                        <input type="submit" value="Buy" class="btn btn-primary btn-block"/>
                    </form>
                </td>
            </tr>
        </table>
    </div>


</div>

</body>
</html>